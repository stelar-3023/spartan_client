(this.webpackJsonpspartan_calisthenics=this.webpackJsonpspartan_calisthenics||[]).push([[0],{42:function(e,t,c){},59:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),s=c(22),a=c.n(s),i=(c(41),c(42),c(16)),o=c(9),l=c(13),u=c(10),j=c(11),d=c.n(j),b=c(15),x=c(67),O=c(68),h=c(69),f=c(70),m=c(71),p=c(60),g=c(14),v=c(2);function w(e){var t=Object(g.c)((function(e){return e.user})),c=Object(r.useState)(!1),n=Object(l.a)(c,2),s=n[0],a=n[1],i=function(){a(!s)};return Object(v.jsxs)(r.Fragment,{children:[e.renderAccount(i),Object(v.jsx)(m.a,{id:"modal-account",className:"modal",centered:!0,isOpen:s,toggle:i,children:Object(v.jsxs)(p.a,{className:"modal-content",children:[Object(v.jsx)("h2",{children:"Account Details"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"account-details",children:[Object(v.jsxs)("h4",{"data-testid":"email",children:["Email: ",t.user.user_email]}),Object(v.jsxs)("h4",{"data-testid":"name",children:["Name: ",t.user.user_name]})]})]})})]})}var y,k,N=c(8),C=c(61),S=c(62),E=c(63),A=c(64),T=c(65),_=c(21),L=Object(_.b)("exercise/addExercise",function(){var e=Object(b.a)(d.a.mark((function e(t){var c,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("/exercises/".concat(t.email),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(!(c=e.sent).ok){e.next=11;break}return e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",{exercises:r});case 11:throw(n=new Error("Error ".concat(c.status,": ").concat(c.statusText))).response=c,n;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),D=Object(_.b)("exercises/getExercises",function(){var e=Object(b.a)(d.a.mark((function e(t){var c,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/exercises/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:if(!(c=e.sent).ok){e.next=10;break}return e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",{exercises:r});case 10:throw(n=new Error("Error ".concat(c.status,": ").concat(c.statusText))).response=c,n;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(_.b)("exercises/deleteExercise",function(){var e=Object(b.a)(d.a.mark((function e(t){var c,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/exercises/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 2:if(!(c=e.sent).ok){e.next=10;break}return e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",{exercise:r});case 10:throw(n=new Error("Error ".concat(c.status,": ").concat(c.statusText))).response=c,n;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=Object(_.b)("exercises/updateExercise",function(){var e=Object(b.a)(d.a.mark((function e(t){var c,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/exercises/".concat(t.exercise_id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(!(c=e.sent).ok){e.next=10;break}return e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",{exercise:r});case 10:throw(n=new Error("Error ".concat(c.status,": ").concat(c.statusText))).response=c,n;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=Object(_.c)({name:"exercises",initialState:{exercises:[]},reducers:{},extraReducers:(y={},Object(N.a)(y,D.pending,(function(e,t){console.log("fetching exercises..."),e.status="fetching exercises..."})),Object(N.a)(y,D.fulfilled,(function(e,t){console.log("fetched exercises successfully"),e.exercises=t.payload.exercises})),Object(N.a)(y,D.rejected,(function(e,t){console.log("error fetching exercises"),e.status="error fetching exercises"})),Object(N.a)(y,z.fulfilled,(function(e,t){console.log("deleted exercise successfully");var c=e.exercises.findIndex((function(e){return e.id===t.payload.id}));e.exercises.splice(c,1)})),Object(N.a)(y,q.fulfilled,(function(e,t){var c=e.exercises.findIndex((function(e){return e.exercise_id===t.payload.exercise.exercise_id}));e.exercises[c]=Object(o.a)(Object(o.a)({},e.exercises[c]),t.payload.exercise)})),Object(N.a)(y,L.fulfilled,(function(e,t){console.log(e,t),console.log("added exercise successfully"),e.exercises.push(t.payload.exercises)})),y)}).reducer,F=Object(_.b)("user/getUserDetails",Object(b.a)(d.a.mark((function e(){var t,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/profile/",{method:"POST",headers:{jwt_token:localStorage.token}});case 2:if(!(t=e.sent).ok){e.next=10;break}return e.next=6,t.json();case 6:return c=e.sent,e.abrupt("return",{user:c});case 10:throw(r=new Error("Error ".concat(t.status,": ").concat(t.statusText))).response=t,r;case 13:case"end":return e.stop()}}),e)})))),P=Object(_.c)({name:"user",initialState:{user:{}},reducers:{},extraReducers:(k={},Object(N.a)(k,F.pending,(function(e,t){console.log("fetching user..."),e.status="fetching user..."})),Object(N.a)(k,F.fulfilled,(function(e,t){console.log("fetched user successfully"),e.user=t.payload.user})),Object(N.a)(k,F.rejected,(function(e,t){console.log("error fetching user"),e.status="error fetching user"})),k)}).reducer;function R(e){var t=Object(g.b)(),c=Object(g.c)((function(e){return e.exercises})),n=Object(g.c)((function(e){return e.user})),s=Object(r.useState)(!1),a=Object(l.a)(s,2),i=a[0],u=a[1],j=Object(r.useState)({exercise:"",reps:0,weight:0,date:new Date,email:n.user.user_email}),d=Object(l.a)(j,2),b=d[0],x=d[1],O=function(){u(!i)},h=Object(r.useCallback)((function(){t(F()),t(D(n.user.user_email))}),[t,n.user.user_email]);Object(r.useEffect)((function(){h()}),[h]);var f=function(e){x(Object(o.a)(Object(o.a)({},b),{},Object(N.a)({},e.target.name,e.target.value)))};console.log(c);return Object(v.jsxs)(r.Fragment,{children:[e.renderWorkout(O),Object(v.jsx)(m.a,{id:"modal-exercise",className:"modal",centered:!0,isOpen:i,toggle:O,children:Object(v.jsxs)(p.a,{children:[Object(v.jsx)(C.a,{className:"cancel-log",onClick:function(){u(!1)},size:"sm",color:"danger",children:"\xd7"}),Object(v.jsx)("h2",{children:"Add Exercises"}),Object(v.jsx)("br",{}),Object(v.jsxs)(S.a,{onSubmit:function(e){e.preventDefault(),t(L(b)),console.log(b),x({exercise:"",reps:0,weight:0,date:new Date,email:n.user.user_email}),u(!1)},id:"exercise-form",children:[Object(v.jsxs)(E.a,{className:"input-field",children:[Object(v.jsx)(A.a,{for:"exercise",children:"Exercise"}),Object(v.jsx)(T.a,{value:b.exercise,onChange:function(e){return f(e)},type:"text",name:"exercise",autoComplete:"off",id:"exercise",placeholder:"exercise",required:!0})]}),Object(v.jsxs)(E.a,{className:"input-field",children:[Object(v.jsx)(A.a,{for:"repetitions",children:"Reps"}),Object(v.jsx)(T.a,{value:b.reps,onChange:function(e){return f(e)},type:"number",name:"reps",autoComplete:"off",id:"reps",placeholder:"reps",required:!0})]}),Object(v.jsxs)(E.a,{className:"input-field",children:[Object(v.jsx)(A.a,{for:"repetitions",children:"Weight"}),Object(v.jsx)(T.a,{value:b.weight,onChange:function(e){return f(e)},type:"number",name:"weight",autoComplete:"off",id:"weight",placeholder:"weight",required:!0})]}),Object(v.jsx)("br",{}),Object(v.jsx)(C.a,{type:"submit",color:"danger",size:"sm",children:"Add Exercise"})]})]})})]})}var J=c(66);function W(e){var t=Object(g.b)(),c=Object(g.c)((function(e){return e.exercises})),n=Object(r.useState)(!1),s=Object(l.a)(n,2),a=s[0],i=s[1],u=Object(r.useState)(!1),j=Object(l.a)(u,2),d=j[0],b=j[1],x=Object(r.useState)({exercise_id:"",exercise:"",reps:"",weight:""}),O=Object(l.a)(x,2),h=O[0],f=O[1],w=function(){i(!a)},y=function(){i(!1),b(!1)},k=function(e){b(!0),f(c.exercises[e.target.id]),console.log(h),console.log(e.target.id)};return Object(v.jsxs)(r.Fragment,{children:[e.renderLog(w),Object(v.jsx)(m.a,{id:"modal-log",className:"modal",isOpen:a,centered:!0,toggle:w,children:Object(v.jsxs)(p.a,{children:[Object(v.jsx)(C.a,{className:"cancel-log",onClick:y,size:"sm",color:"danger",children:"\xd7"}),Object(v.jsx)("h2",{children:"Workout"}),d?Object(v.jsxs)("div",{children:[Object(v.jsx)(T.a,{type:"text",name:"exercise",value:h.exercise,onChange:function(e){f(Object(o.a)(Object(o.a)({},h),{},Object(N.a)({},e.target.name,e.target.value)))}}),Object(v.jsx)("br",{}),Object(v.jsx)(T.a,{type:"text",name:"reps",value:h.reps,onChange:function(e){f(Object(o.a)(Object(o.a)({},h),{},Object(N.a)({},e.target.name,e.target.value)))}}),Object(v.jsx)("br",{}),Object(v.jsx)(T.a,{type:"text",name:"weight",value:h.weight,onChange:function(e){f(Object(o.a)(Object(o.a)({},h),{},Object(N.a)({},e.target.name,e.target.value)))}}),Object(v.jsx)("br",{}),Object(v.jsx)(C.a,{onClick:function(){t(q(h)),console.log(h),b(!1),i(!a)},type:"submit",size:"sm",className:"mb-1 log-button save-button",children:"Save"}),Object(v.jsx)(C.a,{onClick:function(){y()},type:"submit",size:"sm",className:"mb-1 log-button save-button",children:"Cancel"})]}):Object(v.jsxs)(J.a,{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Exercises"}),Object(v.jsx)("th",{children:"Reps"}),Object(v.jsx)("th",{children:"Weight"})]})}),Object(v.jsx)("tbody",{children:c.exercises.map((function(e,r){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.exercise}),Object(v.jsx)("td",{children:e.reps}),Object(v.jsx)("td",{children:e.weight}),Object(v.jsx)("td",{children:Object(v.jsx)(C.a,{id:r,onClick:function(e){return k(e)},type:"submit",size:"sm",className:"log-button",children:"Modify"})}),Object(v.jsx)("td",{children:Object(v.jsx)(C.a,{id:r,onClick:function(e){return function(e){var r=e.target.id;t(z(c.exercises[r].exercise_id))}(e)},type:"submit",size:"sm",className:"log-button",children:"Delete"})})]},e.exercise_id)}))})]})]})})]})}var U=c(20);function M(e){var t=Object(g.b)(),c=Object(g.c)((function(e){return e.user})),n=function(){var t=Object(b.a)(d.a.mark((function t(c){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.preventDefault();try{localStorage.removeItem("token"),e.setAuth(!1),U.b.success("Logged out successfully")}catch(n){r="Server Error",n instanceof Error&&(r=n.message),U.b.error(r)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=Object(r.useCallback)((function(){t(F()),t(D(c.user.user_email))}),[t,c.user.user_email]);return Object(r.useEffect)((function(){s()}),[s]),Object(v.jsxs)(r.Fragment,{children:[Object(v.jsx)(x.a,{fluid:!0,children:Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsx)("h1",{"data-text":"header",children:"Spartan Calisthenics"}),Object(v.jsx)("h2",{children:"A better way to train."})]})})})}),Object(v.jsx)(O.a,{dark:!0,sticky:"top",expand:"sm",children:Object(v.jsx)("div",{className:"container",children:Object(v.jsxs)(h.a,{navbar:!0,style:{marginRight:"auto"},children:[Object(v.jsx)(f.a,{children:Object(v.jsx)(w,{name:c.user_name,email:c.email,renderAccount:function(e){return Object(v.jsx)(i.b,{onClick:e,className:"nav-link logged-in","data-target":"modal-account",to:"#",children:"Account"})}})}),Object(v.jsx)(f.a,{children:Object(v.jsx)(R,{renderWorkout:function(e){return Object(v.jsx)(i.b,{onClick:e,className:"nav-link logged-in","data-target":"modal-exercise",to:"#",children:"Log Workout"})}})}),Object(v.jsx)(f.a,{children:Object(v.jsx)(W,{renderLog:function(e){return Object(v.jsx)(i.b,{onClick:e,className:"nav-link logged-in",to:"#","data-target":"modal-log",children:"Log"})}})}),Object(v.jsx)(f.a,{children:Object(v.jsx)(i.b,{onClick:function(e){return n(e)},className:"nav-link logged-in",to:"#",children:"Logout"})})]})})})]})}function B(e){var t=Object(r.useState)({}),c=Object(l.a)(t,2),n=c[0],s=c[1],a=Object(r.useState)(!1),i=Object(l.a)(a,2),u=i[0],j=i[1],x=Object(r.useState)({email:"",password:""}),O=Object(l.a)(x,2),h=O[0],f=O[1];Object(r.useEffect)((function(){return g(),function(){s({})}}),[]);var g=function(){s({setInputs:f})};console.log(n);var w=h.email,y=h.password,k=function(e){f(Object(o.a)(Object(o.a)({},h),{},Object(N.a)({},e.target.name,e.target.value)))},_=function(){var t=Object(b.a)(d.a.mark((function t(c){var r,n,s,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.prev=1,r={email:w,password:y},t.next=5,fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return n=t.sent,t.next=8,n.json();case 8:(s=t.sent).token?(localStorage.setItem("token",s.token),e.setAuth(!0),U.b.success("Login successful")):(e.setAuth(!1),U.b.error(s)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),a="Server error",t.t0 instanceof Error&&(a=t.t0.message),console.error(a);case 17:L();case 18:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){j(!u)};return Object(v.jsxs)(r.Fragment,{children:[e.renderLogin(L),Object(v.jsx)(m.a,{id:"modal-login",className:"modal",isOpen:u,centered:!0,toggle:L,children:Object(v.jsxs)(p.a,{className:"modal-content",children:[Object(v.jsx)("h4",{children:"Login"}),Object(v.jsx)("br",{}),Object(v.jsxs)(S.a,{onSubmit:_,id:"login-form",children:[Object(v.jsxs)(E.a,{className:"input-field",children:[Object(v.jsx)(A.a,{for:"login-email",children:"Email Address"}),Object(v.jsx)(T.a,{value:w,onChange:function(e){return k(e)},type:"email",name:"email","data-testid":"email-input",autoComplete:"off",id:"login-email",placeholder:"email",required:!0})]}),Object(v.jsxs)(E.a,{className:"input-field",children:[Object(v.jsx)(A.a,{for:"login-password",children:"Your Password"}),Object(v.jsx)(T.a,{value:y,onChange:function(e){return k(e)},type:"password",name:"password",autoComplete:"off",id:"login-password",placeholder:"password",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)(C.a,{type:"submit",color:"danger",size:"sm",children:"Login"})]})]})]})})]})}function G(e){var t=Object(r.useState)({}),c=Object(l.a)(t,2),n=c[0],s=c[1],a=Object(r.useState)(!1),i=Object(l.a)(a,2),j=i[0],x=i[1],O=Object(r.useState)({email:"",password:"",name:""}),h=Object(l.a)(O,2),f=h[0],g=h[1];Object(r.useEffect)((function(){return w(),function(){s({})}}),[]);var w=function(){s({setInputs:g})};console.log(n);var y=Object(u.g)(),k=f.email,_=f.password,L=f.name,D=function(){x(!j)},z=function(e){g(Object(o.a)(Object(o.a)({},f),{},Object(N.a)({},e.target.name,e.target.value)))},q=function(){var t=Object(b.a)(d.a.mark((function t(c){var r,n,s,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.prev=1,r={email:k,password:_,name:L},t.next=5,fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return n=t.sent,t.next=8,n.json();case 8:"User already registered"===(s=t.sent)?(y.push("/"),U.b.error(s)):(console.log(s),localStorage.setItem("token",s),y.push("/home"),e.setAuth(!0),U.b.success("Register successful")),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),a="Server error",t.t0 instanceof Error&&(a=t.t0.message),console.error(a);case 17:D();case 18:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)(r.Fragment,{children:[e.renderSignup(D),Object(v.jsx)(m.a,{id:"modal-signup",className:"modal",isOpen:j,centered:!0,toggle:D,children:Object(v.jsxs)(p.a,{className:"modal-content",children:[Object(v.jsx)("h4",{children:"Sign up"}),Object(v.jsx)("br",{}),Object(v.jsxs)(S.a,{onSubmit:q,id:"signup-form",children:[Object(v.jsxs)(E.a,{className:"input-field",children:[Object(v.jsx)(A.a,{for:"signup-email",children:"Email Address"}),Object(v.jsx)(T.a,{value:k,onChange:function(e){return z(e)},type:"email",name:"email","data-testid":"email-input",autoComplete:"on",id:"signup-email",placeholder:"Enter email",required:!0})]}),Object(v.jsxs)(E.a,{className:"input-field",children:[Object(v.jsx)(A.a,{for:"sign-up-password",children:"Choose Password"}),Object(v.jsx)(T.a,{value:_,onChange:function(e){return z(e)},type:"password",name:"password",autoComplete:"off",id:"signup-password",placeholder:"password",required:!0})]}),Object(v.jsxs)(E.a,{className:"input-field",children:[Object(v.jsx)(A.a,{for:"signup-username",children:"Choose username"}),Object(v.jsx)(T.a,{value:L,onChange:function(e){return z(e)},type:"text",name:"name",autoComplete:"off",id:"signup-username",placeholder:"username",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)(C.a,{type:"submit",color:"danger",size:"sm",children:"Submit"})]})]})]})})]})}function Y(e){return Object(v.jsxs)(r.Fragment,{children:[Object(v.jsx)(x.a,{fluid:!0,children:Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsx)("h1",{children:"Spartan Calisthenics"}),Object(v.jsx)("h2",{children:"A better way to train."})]})})})}),Object(v.jsx)(O.a,{dark:!0,sticky:"top",expand:"sm",children:Object(v.jsx)("div",{className:"container",children:Object(v.jsxs)(h.a,{navbar:!0,style:{marginRight:"auto"},children:[Object(v.jsx)(f.a,{children:Object(v.jsx)(B,{setAuth:e.setAuth,renderLogin:function(e){return Object(v.jsx)(i.b,{onClick:e,className:"nav-link logged-out","data-target":"modal-login",to:"#",children:"Login"})}})}),Object(v.jsx)(f.a,{children:Object(v.jsx)(G,{setAuth:e.setAuth,renderSignup:function(e){return Object(v.jsx)(i.b,{onClick:e,className:"nav-link logged-out","data-target":"modal-signup",to:"#",children:"Sign up"})}})})]})})})]})}var H=c.p+"static/media/exercise.aeee0cf6.jpg";function K(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),c=t[0],n=t[1],s=function(e){n(e)};return Object(v.jsxs)(i.a,{children:[Object(v.jsx)("div",{className:"container",children:Object(v.jsxs)(u.d,{children:[Object(v.jsx)(u.b,{exact:!0,path:"/",render:function(e){return c?Object(v.jsx)(u.a,{to:"/home"}):Object(v.jsx)(Y,Object(o.a)({setAuth:s},e))}}),Object(v.jsx)(u.b,{path:"/home",render:function(e){return c?Object(v.jsx)(M,Object(o.a)({setAuth:s},e)):Object(v.jsx)(u.a,{to:"/"})}})]})}),Object(v.jsx)("img",{src:H,alt:"exercise",className:"exercise-img"})]})}c(58);var Q=c(18),V=Object(Q.b)({exercises:I,user:P}),X=Object(_.a)({reducer:V,devTools:!0});var Z=function(){return Object(v.jsx)(i.a,{children:Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)(g.a,{store:X,children:[Object(v.jsx)(K,{}),Object(v.jsx)(U.a,{theme:"dark"})]})})})};a.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(Z,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.298d6f55.chunk.js.map